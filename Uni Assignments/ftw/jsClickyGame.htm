<!DOCTYPE html>
<!-- saved from url=(0096)http://www.aber.ac.uk/~dcswww/Dept/Teaching/CourseNotes/current/CS25210/slides/jsclickygame.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
		<title>JavaScript clicky game</title>
	</head>
	<body onload="start_game()">

	<h2>When the button appears, click on it!</h2>

<!--This is an "empty" paragraph, which we can fill using JavaScript and a call to document.getElementById('p1') -->
<p id="p1"></p> 


<script>
var time_now;
var tempdate;
var time_then;
var reaction_time;
var x;
var delay= Math.floor(Math.random()*5000 + 1);
var best_time = 0;

function start_game() {
        document.getElementById('p1').innerHTML="";
        document.getElementById("time").innerHTML=best_time;
	// get the date and time now 
	tempdate=new Date();
	// store the time the button will show 
	time_then=tempdate.getTime() + delay;

        console.log(time_then);

	// set our button to show "delay" ms in the future
	x=setTimeout("show_button()",delay);
}

function stop_game() {
	// Fill in some blanks here
	// You should find out what time the button was clicked
        tempdate=new Date();
        time_now = tempdate.getTime();

	// And you should work out what reaction_time 
	// should be
        
	reaction_time= time_now - time_then;
	document.getElementById('p1').innerHTML='You took '+reaction_time+' milliseconds';
                
        if(best_time === 0 && reaction_time > 0){
            best_time = reaction_time;
        }        
        if(reaction_time < best_time){
            best_time = reaction_time;
        }
}


function show_button() {
	document.getElementById('p1').innerHTML='<input type="button" value="Click me!" id="blahblah" onClick="stop_game();">';
}

</script>
<br />
<br />
<br />
<br />
<input type="button" value="Play Again!" id="reload" onClick="start_game();">
<!-- <p>Best time = <input type ="text" id ="time"></p> -->

Best time = <p id="time"></p>

        </body></html>